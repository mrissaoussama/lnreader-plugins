var e=this&&this.__awaiter||function(e,l,a,t){return new(a||(a=Promise))((function(u,r){function o(e){try{i(t.next(e))}catch(e){r(e)}}function n(e){try{i(t.throw(e))}catch(e){r(e)}}function i(e){var l;e.done?u(e.value):(l=e.value,l instanceof a?l:new a((function(e){e(l)}))).then(o,n)}i((t=t.apply(e,l||[])).next())}))},l=this&&this.__generator||function(e,l){var a,t,u,r={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=n(0),o.throw=n(1),o.return=n(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function n(n){return function(i){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,n[0]&&(r=0)),r;)try{if(a=1,t&&(u=2&n[0]?t.return:n[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,n[1])).done)return u;switch(t=0,u&&(n=[2&n[0],u.value]),n[0]){case 0:case 1:u=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,t=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(!(u=r.trys,(u=u.length>0&&u[u.length-1])||6!==n[0]&&2!==n[0])){r=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){r.label=n[1];break}if(6===n[0]&&r.label<u[1]){r.label=u[1],u=n;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(n);break}u[2]&&r.ops.pop(),r.trys.pop();continue}n=l.call(e,r)}catch(e){n=[6,e],t=0}finally{a=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}},a=this&&this.__spreadArray||function(e,l,a){if(a||2===arguments.length)for(var t,u=0,r=l.length;u<r;u++)!t&&u in l||(t||(t=Array.prototype.slice.call(l,0,u)),t[u]=l[u]);return e.concat(t||Array.prototype.slice.call(l))};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@libs/fetch"),u=require("@libs/filterInputs"),r=require("cheerio"),o=function(){function o(){this.id="WTRLAB",this.name="WTR-LAB",this.site="https://wtr-lab.com/",this.version="1.0.4",this.icon="src/en/wtrlab/icon.png",this.sourceLang="en/",this.filters={search:{value:"",label:"Search",type:u.FilterTypes.TextInput},orderBy:{value:"update",label:"Order by",options:[{label:"Update Date",value:"update"},{label:"Addition Date",value:"date"},{label:"Random",value:"random"},{label:"Weekly View",value:"weekly_rank"},{label:"Monthly View",value:"monthly_rank"},{label:"All-Time View",value:"view"},{label:"Name",value:"name"},{label:"Reader",value:"reader"},{label:"Chapter",value:"chapter"},{label:"Rating",value:"rating"},{label:"Review Count",value:"total_rate"},{label:"Vote Count",value:"vote"}],type:u.FilterTypes.Picker},order:{value:"desc",label:"Order",options:[{label:"Descending",value:"desc"},{label:"Ascending",value:"asc"}],type:u.FilterTypes.Picker},status:{value:"all",label:"Status",options:[{label:"All",value:"all"},{label:"Ongoing",value:"ongoing"},{label:"Completed",value:"completed"},{label:"Hiatus",value:"hiatus"},{label:"Dropped",value:"dropped"}],type:u.FilterTypes.Picker},release_status:{value:"all",label:"Release Status",options:[{label:"All",value:"all"},{label:"Released",value:"released"},{label:"On Voting",value:"voting"}],type:u.FilterTypes.Picker},addition_age:{value:"all",label:"Addition Age",options:[{label:"All",value:"all"},{label:"< 2 Days",value:"day"},{label:"< 1 Week",value:"week"},{label:"< 1 Month",value:"month"}],type:u.FilterTypes.Picker},min_chapters:{value:"",label:"Minimum Chapters",type:u.FilterTypes.TextInput},min_rating:{value:"",label:"Minimum Rating (0.0-5.0)",type:u.FilterTypes.TextInput},min_review_count:{value:"",label:"Minimum Review Count",type:u.FilterTypes.TextInput},genre_operator:{value:"and",label:"Genre (And/Or)",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],type:u.FilterTypes.Picker},genres:{label:"Genres",type:u.FilterTypes.ExcludableCheckboxGroup,value:{include:[],exclude:[]},options:[{label:"Action",value:"1"},{label:"Adult",value:"2"},{label:"Adventure",value:"3"},{label:"Comedy",value:"4"},{label:"Drama",value:"5"},{label:"Ecchi",value:"6"},{label:"Erciyuan",value:"7"},{label:"Fan-fiction",value:"8"},{label:"Fantasy",value:"9"},{label:"Game",value:"10"},{label:"Gender Bender",value:"11"},{label:"Harem",value:"12"},{label:"Historical",value:"13"},{label:"Horror",value:"14"},{label:"Josei",value:"15"},{label:"Martial Arts",value:"16"},{label:"Mature",value:"17"},{label:"Mecha",value:"18"},{label:"Military",value:"19"},{label:"Mystery",value:"20"},{label:"Psychological",value:"21"},{label:"Romance",value:"22"},{label:"School Life",value:"23"},{label:"Sci-fi",value:"24"},{label:"Seinen",value:"25"},{label:"Shoujo",value:"26"},{label:"Shoujo Ai",value:"27"},{label:"Shounen",value:"28"},{label:"Shounen Ai",value:"29"},{label:"Slice of Life",value:"30"},{label:"Smut",value:"31"},{label:"Sports",value:"32"},{label:"Supernatural",value:"33"},{label:"Tragedy",value:"34"},{label:"Urban Life",value:"35"},{label:"Wuxia",value:"36"},{label:"Xianxia",value:"37"},{label:"Xuanhuan",value:"38"},{label:"Yaoi",value:"39"},{label:"Yuri",value:"40"}]},tag_operator:{value:"and",label:"Tag (And/Or)",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],type:u.FilterTypes.Picker},tags:{label:"Tags",type:u.FilterTypes.ExcludableCheckboxGroup,value:{include:[],exclude:[]},options:[{label:"Male Protagonist",value:"417"},{label:"Transmigration",value:"717"},{label:"System",value:"696"},{label:"Cultivation",value:"169"},{label:"Special Abilities",value:"667"},{label:"Female Protagonist",value:"275"},{label:"Fanfiction",value:"263"},{label:"Weak to Strong",value:"750"},{label:"Handsome Male Lead",value:"327"},{label:"Beautiful Female Lead",value:"81"},{label:"Game Elements",value:"297"},{label:"Cheats",value:"122"},{label:"Genius Protagonist",value:"306"},{label:"Reincarnation",value:"578"},{label:"Harem-seeking Protagonist",value:"329"},{label:"Time Travel",value:"710"},{label:"Overpowered Protagonist",value:"506"},{label:"Modern Day",value:"446"},{label:"Business Management",value:"108"},{label:"Calm Protagonist",value:"111"},{label:"Magic",value:"410"},{label:"Immortals",value:"357"},{label:"Clever Protagonist",value:"134"},{label:"Ruthless Protagonist",value:"595"},{label:"Apocalypse",value:"47"},{label:"World Hopping",value:"756"},{label:"Poor to Rich",value:"540"},{label:"Douluo Dalu",value:"772"},{label:"Naruto",value:"769"},{label:"Farming",value:"266"},{label:"Fantasy World",value:"265"},{label:"Kingdom Building",value:"379"},{label:"Fast Cultivation",value:"267"},{label:"Protagonist Strong from the Start",value:"560"},{label:"Cunning Protagonist",value:"171"},{label:"Nationalism",value:"476"},{label:"Schemes And Conspiracies",value:"601"},{label:"Survival",value:"692"},{label:"Post-apocalyptic",value:"544"},{label:"Hard-Working Protagonist",value:"328"},{label:"Showbiz",value:"640"},{label:"Unlimited Flow",value:"735"},{label:"Demons",value:"191"},{label:"Monsters",value:"452"},{label:"Dragons",value:"216"},{label:"Romantic Subplot",value:"592"},{label:"Polygamy",value:"538"},{label:"Beast Companions",value:"78"},{label:"Marvel",value:"766"},{label:"Evolution",value:"248"},{label:"One Piece",value:"767"},{label:"Leadership",value:"388"},{label:"Alternate World",value:"30"},{label:"Pets",value:"520"},{label:"World Travel",value:"757"},{label:"Celebrities",value:"117"},{label:"Strong to Stronger",value:"682"},{label:"Game Ranking System",value:"298"},{label:"Alchemy",value:"27"},{label:"Arrogant Characters",value:"56"},{label:"Multiple Realms",value:"459"},{label:"Army Building",value:"54"},{label:"Magical Space",value:"414"},{label:"Wealthy Characters",value:"751"},{label:"Early Romance",value:"225"},{label:"Racism",value:"570"},{label:"Devoted Love Interests",value:"198"},{label:"Comedic Undertone",value:"146"},{label:"Businessmen",value:"109"},{label:"Second Chance",value:"606"},{label:"Revenge",value:"585"},{label:"Wizards",value:"755"},{label:"Pregnancy",value:"549"},{label:"Ancient China",value:"34"},{label:"Black Belly",value:"87"},{label:"Evil Protagonist",value:"246"},{label:"Love Interest Falls in Love First",value:"403"},{label:"Evil Gods",value:"244"},{label:"Academy",value:"5"},{label:"Outer Space",value:"505"},{label:"Zombies",value:"765"},{label:"Single Female Lead",value:"787"},{label:"Mythology",value:"473"},{label:"Gods",value:"316"},{label:"Harry Potter",value:"768"},{label:"Sword Wielder",value:"695"},{label:"Shameless Protagonist",value:"630"},{label:"Futuristic Setting",value:"294"},{label:"Pokemon",value:"771"},{label:"Parallel Worlds",value:"510"},{label:"Level System",value:"390"},{label:"Beasts",value:"80"},{label:"Strong Love Interests",value:"681"},{label:"Fantasy Creatures",value:"264"},{label:"Modern Knowledge",value:"447"},{label:"Hiding True Identity",value:"343"},{label:"Loyal Subordinates",value:"408"},{label:"Slow Romance",value:"659"},{label:"Family",value:"257"},{label:"Politics",value:"536"},{label:"Determined Protagonist",value:"197"},{label:"Hiding True Abilities",value:"342"},{label:"Cosmic Wars",value:"156"},{label:"Ancient Times",value:"35"},{label:"Arranged Marriage",value:"55"},{label:"Complex Family Relationships",value:"148"},{label:"Cold Protagonist",value:"142"},{label:"Ghosts",value:"307"},{label:"Sword And Magic",value:"694"},{label:"Based on an Anime",value:"74"},{label:"Wars",value:"748"},{label:"Survival Game",value:"693"},{label:"Military",value:"437"},{label:"Betrayal",value:"83"},{label:"Misunderstandings",value:"442"},{label:"Time Skip",value:"709"},{label:"Bloodlines",value:"93"},{label:"Transported to Another World",value:"721"},{label:"Cautious Protagonist",value:"116"},{label:"Nobles",value:"485"},{label:"Technological Gap",value:"699"},{label:"Doting Love Interests",value:"211"},{label:"Antihero Protagonist",value:"43"},{label:"Godly Powers",value:"315"},{label:"Reincarnated in Another World",value:"577"},{label:"Lucky Protagonist",value:"409"},{label:"Virtual Reality",value:"742"},{label:"Medical Knowledge",value:"433"},{label:"God Protagonist",value:"312"},{label:"Adapted to Manhua",value:"15"},{label:"Fast Learner",value:"268"},{label:"Childcare",value:"126"},{label:"Kingdoms",value:"380"},{label:"Scientists",value:"603"},{label:"Underestimated Protagonist",value:"731"},{label:"Multiple Identities",value:"455"},{label:"Naive Protagonist",value:"474"},{label:"Doctors",value:"208"},{label:"Artifacts",value:"58"},{label:"Older Love Interests",value:"492"},{label:"Elves",value:"233"},{label:"Hidden Abilities",value:"341"},{label:"Power Couple",value:"545"},{label:"Cooking",value:"154"},{label:"Unique Cultivation Technique",value:"732"},{label:"Body Tempering",value:"95"},{label:"Chat Rooms",value:"121"},{label:"Eye Powers",value:"251"},{label:"Artificial Intelligence",value:"59"},{label:"Master-Disciple Relationship",value:"428"},{label:"Interdimensional Travel",value:"368"},{label:"Famous Protagonist",value:"261"},{label:"Royalty",value:"594"},{label:"Low-key Protagonist",value:"407"},{label:"Late Romance",value:"385"},{label:"Gamers",value:"299"},{label:"Monster Tamer",value:"451"},{label:"Possessive Characters",value:"543"},{label:"Aliens",value:"28"},{label:"Multiple POV",value:"457"},{label:"Mythical Beasts",value:"472"},{label:"Familial Love",value:"255"},{label:"Confident Protagonist",value:"150"},{label:"Mature Protagonist",value:"432"},{label:"Rape",value:"571"},{label:"Reincarnated as a Monster",value:"574"},{label:"Slow Growth at Start",value:"658"},{label:"Cold Love Interests",value:"141"},{label:"Character Growth",value:"118"},{label:"Sect Development",value:"613"},{label:"Summoning Magic",value:"691"},{label:"Acting",value:"7"},{label:"Ability Steal",value:"2"},{label:"Movies",value:"453"},{label:"Ninjas",value:"484"},{label:"Previous Life Talent",value:"551"},{label:"Gate to Another World",value:"301"},{label:"Money Grubber",value:"448"},{label:"Non-humanoid Protagonist",value:"486"},{label:"Dark",value:"181"},{label:"Strength-based Social Hierarchy",value:"680"},{label:"Industrialization",value:"362"},{label:"Mysterious Past",value:"470"},{label:"Caring Protagonist",value:"115"},{label:"Pirates",value:"529"},{label:"Pill Concocting",value:"527"},{label:"European Ambience",value:"243"},{label:"Cruel Characters",value:"167"},{label:"Charismatic Protagonist",value:"119"},{label:"Strategist",value:"679"},{label:"Assassins",value:"61"},{label:"Secret Organizations",value:"609"},{label:"Knights",value:"381"},{label:"Vampires",value:"740"},{label:"Firearms",value:"278"},{label:"Army",value:"53"},{label:"Dao Comprehension",value:"179"},{label:"Absent Parents",value:"3"},{label:"Clan Building",value:"132"},{label:"Detectives",value:"196"},{label:"Heroes",value:"339"},{label:"Friendship",value:"291"},{label:"Charming Protagonist",value:"120"},{label:"Accelerated Growth",value:"6"},{label:"College/University",value:"144"},{label:"Depictions of Cruelty",value:"193"},{label:"Artifact Crafting",value:"57"},{label:"Doting Parents",value:"213"},{label:"Past Plays a Big Role",value:"515"},{label:"MMORPG",value:"443"},{label:"Card Games",value:"113"},{label:"Magic Beasts",value:"411"},{label:"Tragic Past",value:"715"},{label:"First-time Intercourse",value:"280"},{label:"Transported into a Game World",value:"719"},{label:"Mysterious Family Background",value:"468"},{label:"Management",value:"420"},{label:"Secret Identity",value:"608"},{label:"Earth Invasion",value:"226"},{label:"Clones",value:"136"},{label:"Based on a Video Game",value:"72"},{label:"Swallowed Star",value:"785"},{label:"Magic Formations",value:"412"},{label:"Gao Wu",value:"781"},{label:"Genetic Modifications",value:"304"},{label:"Male Yandere",value:"419"},{label:"Writers",value:"759"},{label:"Based on a Movie",value:"69"},{label:"Elemental Magic",value:"232"},{label:"Discrimination",value:"201"},{label:"Marriage",value:"424"},{label:"Evil Organizations",value:"245"},{label:"Younger Sisters",value:"764"},{label:"Sudden Wealth",value:"688"},{label:"Doting Older Siblings",value:"212"},{label:"Cute Children",value:"174"},{label:"Manipulative Characters",value:"422"},{label:"Age Progression",value:"24"},{label:"Hunters",value:"353"},{label:"Adventurers",value:"22"},{label:"Threesome",value:"704"},{label:"Mystery Solving",value:"471"},{label:"Perverted Protagonist",value:"519"},{label:"Jack of All Trades",value:"372"},{label:"Battle Competition",value:"76"},{label:"Multiple Reincarnated Individuals",value:"460"},{label:"Sex Slaves",value:"627"},{label:"Soul Power",value:"663"},{label:"Orphans",value:"500"},{label:"Martial Spirits",value:"426"},{label:"Dense Protagonist",value:"192"},{label:"Family Conflict",value:"259"},{label:"Magical Technology",value:"415"},{label:"Warhammer",value:"775"},{label:"Smart Couple",value:"660"},{label:"Teachers",value:"697"},{label:"Police",value:"534"},{label:"Selfish Protagonist",value:"616"},{label:"Simulator",value:"786"},{label:"Demonic Cultivation Technique",value:"190"},{label:"Rape Victim Becomes Lover",value:"572"},{label:"Hackers",value:"324"},{label:"Sudden Strength Gain",value:"687"},{label:"Imperial Harem",value:"358"},{label:"Family Business",value:"258"},{label:"Cute Protagonist",value:"175"},{label:"Apathetic Protagonist",value:"46"},{label:"Lack of Common Sense",value:"383"},{label:"Aristocracy",value:"51"},{label:"Death of Loved Ones",value:"184"},{label:"Enemies Become Lovers",value:"237"},{label:"Empires",value:"235"},{label:"Dungeons",value:"221"},{label:"Male to Female",value:"418"},{label:"Lazy Protagonist",value:"387"},{label:"Evil Religions",value:"247"},{label:"Obsessive Love",value:"490"},{label:"Easy Going Life",value:"227"},{label:"Appearance Changes",value:"48"},{label:"Demon Lord",value:"189"},{label:"Carefree Protagonist",value:"114"},{label:"Mutations",value:"466"},{label:"Student-Teacher Relationship",value:"685"},{label:"R-18",value:"568"},{label:"Abusive Characters",value:"4"},{label:"Appearance Different from Actual Age",value:"49"},{label:"Football",value:"780"},{label:"Human-Nonhuman Relationship",value:"351"},{label:"Pragmatic Protagonist",value:"547"},{label:"Hot-blooded Protagonist",value:"348"},{label:"Necromancer",value:"478"},{label:"Battle Academy",value:"75"},{label:"Witches",value:"754"},{label:"Yandere",value:"760"},{label:"Dragon Ball",value:"773"},{label:"Childhood Friends",value:"127"},{label:"Based on a TV Show",value:"71"},{label:"Dwarfs",value:"222"},{label:"Inheritance",value:"364"},{label:"Child Protagonist",value:"125"},{label:"Honkai",value:"818"},{label:"Daoism",value:"180"},{label:"Heavenly Tribulation",value:"335"},{label:"Netori",value:"482"},{label:"Sexual Cultivation Technique",value:"629"},{label:"Buddhism",value:"106"},{label:"Broken Engagement",value:"103"},{label:"Reverse Rape",value:"587"},{label:"Time Manipulation",value:"707"},{label:"DC Universe",value:"778"},{label:"Eidetic Memory",value:"230"},{label:"Clingy Lover",value:"135"},{label:"Live Streaming",value:"782"},{label:"Mutated Creatures",value:"465"},{label:"Phoenixes",value:"524"},{label:"Sharp-tongued Characters",value:"633"},{label:"Souls",value:"664"},{label:"Poor Protagonist",value:"539"},{label:"Angels",value:"38"},{label:"Singers",value:"648"},{label:"Proactive Protagonist",value:"555"},{label:"Heartwarming",value:"333"},{label:"Fellatio",value:"273"},{label:"Spatial Manipulation",value:"665"},{label:"Tsundere",value:"725"},{label:"Enemies Become Allies",value:"236"},{label:"e-Sports",value:"224"},{label:"Mind Control",value:"439"},{label:"Mercenaries",value:"435"},{label:"Adopted Protagonist",value:"20"},{label:"Average-looking Protagonist",value:"65"},{label:"Master-Servant Relationship",value:"429"},{label:"Gore",value:"318"},{label:"Store Owner",value:"675"},{label:"Amnesia",value:"31"},{label:"Human Experimentation",value:"349"},{label:"Strategic Battles",value:"678"},{label:"Goddesses",value:"314"},{label:"Skill Assimilation",value:"651"},{label:"Abandoned Children",value:"1"},{label:"Bleach",value:"770"},{label:"Death",value:"183"},{label:"Emotionally Weak Protagonist",value:"234"},{label:"Aggressive Characters",value:"26"},{label:"Resurrection",value:"583"},{label:"Cross-dressing",value:"165"},{label:"Transformation Ability",value:"716"},{label:"Villainess Noble Girls",value:"741"},{label:"Insects",value:"366"},{label:"Thriller",value:"705"},{label:"Orcs",value:"497"},{label:"Boss-Subordinate Relationship",value:"100"},{label:"Fated Lovers",value:"271"},{label:"Music",value:"464"},{label:"Economics",value:"228"},{label:"Loli",value:"395"},{label:"Couple Growth",value:"158"},{label:"Incest",value:"359"},{label:"Multiple Transported Individuals",value:"462"},{label:"Protagonist with Multiple Bodies",value:"561"},{label:"Religions",value:"579"},{label:"Game Creator",value:"784"},{label:"Soldiers",value:"662"},{label:"Righteous Protagonist",value:"590"},{label:"Blacksmith",value:"89"},{label:"Adopted Children",value:"19"},{label:"Yu-Gi-Oh!",value:"774"},{label:"Twins",value:"726"},{label:"Crossover",value:"166"},{label:"Power Struggle",value:"546"},{label:"Otaku",value:"501"},{label:"Saints",value:"597"},{label:"Teamwork",value:"698"},{label:"Age Regression",value:"25"},{label:"Honghuang",value:"801"},{label:"Siblings Not Related by Blood",value:"645"},{label:"Reincarnated in a Game World",value:"576"},{label:"Poisons",value:"533"},{label:"Fox Spirits",value:"289"},{label:"Adapted to Manga",value:"14"},{label:"Sexual Abuse",value:"628"},{label:"Dolls/Puppets",value:"209"},{label:"Long Separations",value:"398"},{label:"Proficiency",value:"793"},{label:"Skill Creation",value:"653"},{label:"Gangs",value:"300"},{label:"Gunfighters",value:"323"},{label:"Journey to the West",value:"796"},{label:"Detective Conan",value:"804"},{label:"Popular Love Interests",value:"541"},{label:"Pill Based Cultivation",value:"526"},{label:"Destiny",value:"195"},{label:"Parody",value:"513"},{label:"Multiple Timelines",value:"461"},{label:"Personality Changes",value:"518"},{label:"Psychic Powers",value:"562"},{label:"Generals",value:"303"},{label:"Narcissistic Protagonist",value:"475"},{label:"Transplanted Memories",value:"718"},{label:"Crime",value:"163"},{label:"Domestic Affairs",value:"210"},{label:"Murders",value:"463"},{label:"Guilds",value:"322"},{label:"Books",value:"98"},{label:"Chefs",value:"123"},{label:"Mortal Flow",value:"792"},{label:"Loner Protagonist",value:"397"},{label:"Contracts",value:"153"},{label:"Quirky Characters",value:"566"},{label:"Adapted to Anime",value:"10"},{label:"Beastkin",value:"79"},{label:"Archery",value:"50"},{label:"Adultery",value:"21"},{label:"Harsh Training",value:"330"},{label:"Organized Crime",value:"498"},{label:"Biochip",value:"85"},{label:"Fairies",value:"252"},{label:"Psychopaths",value:"563"},{label:"Multiple Protagonists",value:"458"},{label:"Ugly to Beautiful",value:"729"},{label:"Playful Protagonist",value:"531"},{label:"Minecraft",value:"790"},{label:"Medieval",value:"434"},{label:"Divination",value:"205"},{label:"Younger Love Interests",value:"763"},{label:"Sister Complex",value:"650"},{label:"Maids",value:"416"},{label:"Protagonist Falls in Love First",value:"559"},{label:"Dreams",value:"217"},{label:"Persistent Love Interests",value:"517"},{label:"Hunter x Hunter",value:"777"},{label:"Brother Complex",value:"104"},{label:"Humanoid Protagonist",value:"352"},{label:"Brotherhood",value:"105"},{label:"Playboys",value:"530"},{label:"Jealousy",value:"373"},{label:"Tribal Society",value:"723"},{label:"Secrets",value:"612"},{label:"Saving the World",value:"600"},{label:"Slaves",value:"656"},{label:"Three Kingdoms",value:"795"},{label:"Childhood Love",value:"128"},{label:"Thieves",value:"703"},{label:"Demi-Humans",value:"188"},{label:"Dao Companion",value:"178"},{label:"Sign In",value:"811"},{label:"Race Change",value:"569"},{label:"Crafting",value:"162"},{label:"First Love",value:"279"},{label:"Cyberpunk 2077",value:"783"},{label:"Curses",value:"173"},{label:"Spirit Advisor",value:"669"},{label:"Marriage of Convenience",value:"425"},{label:"Near-Death Experience",value:"477"},{label:"Lost Civilizations",value:"400"},{label:"Prophecies",value:"557"},{label:"Forced Marriage",value:"286"},{label:"Episodic",value:"241"},{label:"Conferred Gods",value:"800"},{label:"Artists",value:"60"},{label:"Animal Characteristics",value:"39"},{label:"Cannibalism",value:"112"},{label:"Fearless Protagonist",value:"272"},{label:"Dark Fantasy",value:"789"},{label:"Secretive Protagonist",value:"611"},{label:"God-human Relationship",value:"313"},{label:"Child Abuse",value:"124"},{label:"Cowardly Protagonist",value:"161"},{label:"Anti-social Protagonist",value:"42"},{label:"Prison",value:"554"},{label:"Female Master",value:"274"},{label:"Hollywood",value:"779"},{label:"Past Trauma",value:"516"},{label:"Torture",value:"713"},{label:"Adapted to Drama",value:"11"},{label:"Bullying",value:"107"},{label:"Androgynous Characters",value:"36"},{label:"Class Awakening",value:"827"},{label:"Multiple Personalities",value:"456"},{label:"Corruption",value:"155"},{label:"Merchants",value:"436"},{label:"Animal Rearing",value:"40"},{label:"Werebeasts",value:"752"},{label:"Exorcism",value:"250"},{label:"Bodyguards",value:"97"},{label:"Hell",value:"336"},{label:"Bickering Couple",value:"84"},{label:"Honest Protagonist",value:"346"},{label:"Fairy Tail",value:"814"},{label:"Divorce",value:"207"},{label:"Spirits",value:"671"},{label:"Unconditional Love",value:"730"},{label:"Reverse Harem",value:"586"},{label:"World Tree",value:"758"},{label:"Criminals",value:"164"},{label:"Skill Books",value:"652"},{label:"Investigations",value:"370"},{label:"Succubus",value:"686"},{label:"Blackmail",value:"88"},{label:"Sentient Objects",value:"620"},{label:"Goblins",value:"311"},{label:"Different Social Status",value:"199"},{label:"Hospital",value:"347"},{label:"Genshin Impact",value:"815"},{label:"Stubborn Protagonist",value:"683"},{label:"Sickly Characters",value:"646"},{label:"Servants",value:"623"},{label:"Disabilities",value:"200"},{label:"Lord",value:"823"},{label:"Returning from Another World",value:"584"},{label:"Cute Story",value:"176"},{label:"Unlucky Protagonist",value:"736"},{label:"Life Script",value:"824"},{label:"Netorare",value:"480"},{label:"Heaven",value:"334"},{label:"Spear Wielder",value:"666"},{label:"Inscriptions",value:"365"},{label:"Engineer",value:"239"},{label:"Lord of the Mysteries",value:"799"},{label:"Masochistic Characters",value:"427"},{label:"Possession",value:"542"},{label:"Conditional Power",value:"149"},{label:"Familiars",value:"256"},{label:"Healers",value:"332"},{label:"Slave Harem",value:"654"},{label:"Herbalist",value:"338"},{label:"Kind Love Interests",value:"378"},{label:"Devouring",value:"797"},{label:"League of Legends",value:"791"},{label:"Mpreg",value:"454"},{label:"Famous Parents",value:"260"},{label:"Love at First Sight",value:"402"},{label:"Heavenly Defying Comprehension",value:"803"},{label:"Basketball",value:"809"},{label:"Hated Protagonist",value:"331"},{label:"Fallen Angels",value:"253"},{label:"Dragon Slayers",value:"215"},{label:"Seme Protagonist",value:"618"},{label:"Legends",value:"389"},{label:"Fleet Battles",value:"282"},{label:"Blood Manipulation",value:"92"},{label:"Court Official",value:"159"},{label:"Summoned Hero",value:"690"},{label:"Androids",value:"37"},{label:"Lottery",value:"401"},{label:"Game of Thrones",value:"813"},{label:"Fat to Fit",value:"270"},{label:"Priests",value:"553"},{label:"Seeing Things Other Humans Can't",value:"615"},{label:"Shoujo-Ai Subplot",value:"638"},{label:"Twisted Personality",value:"727"},{label:"Magical Girls",value:"413"},{label:"Sadistic Characters",value:"596"},{label:"Enlightenment",value:"240"},{label:"Prostitutes",value:"558"},{label:"Weak Protagonist",value:"749"},{label:"Copy",value:"807"},{label:"Adapted to Game",value:"13"},{label:"Puppeteers",value:"564"},{label:"Sealed Power",value:"605"},{label:"Cohabitation",value:"140"},{label:"Mob Protagonist",value:"444"},{label:"Seven Deadly Sins",value:"624"},{label:"Single Parent",value:"649"},{label:"Drugs",value:"218"},{label:"Territory Management",value:"802"},{label:"Druids",value:"219"},{label:"Kidnappings",value:"377"},{label:"R-15",value:"567"},{label:"Brainwashing",value:"101"},{label:"Overprotective Siblings",value:"507"},{label:"Gambling",value:"296"},{label:"Arms Dealers",value:"52"},{label:"Manly Gay Couple",value:"423"},{label:"Unique Weapons",value:"734"},{label:"Lawyers",value:"386"},{label:"Anal",value:"33"},{label:"Time Loop",value:"706"},{label:"Grinding",value:"320"},{label:"Slave Protagonist",value:"655"},{label:"Hypnotism",value:"354"},{label:"Demon Slayer",value:"812"},{label:"Unreliable Narrator",value:"737"},{label:"Unique Weapon User",value:"733"},{label:"Poetry",value:"532"},{label:"Philosophical",value:"522"},{label:"Feng Shui",value:"277"},{label:"Chuunibyou",value:"131"},{label:"Reality-Game Fusion",value:"830"},{label:"Dragon Riders",value:"214"},{label:"Omegaverse",value:"493"},{label:"Suicides",value:"689"},{label:"Love Rivals",value:"404"},{label:"Stoic Characters",value:"674"},{label:"Monster Girls",value:"449"},{label:"Trickster",value:"724"},{label:"Handjob",value:"326"},{label:"Limited Lifespan",value:"392"},{label:"Restaurant",value:"582"},{label:"Fallen Nobility",value:"254"},{label:"Masturbation",value:"430"},{label:"Dishonest Protagonist",value:"203"},{label:"Dungeon Master",value:"220"},{label:"Serial Killers",value:"622"},{label:"Younger Brothers",value:"762"},{label:"Pharmacist",value:"521"},{label:"Secret Relationship",value:"610"},{label:"Living Alone",value:"394"},{label:"Mangaka",value:"421"},{label:"Childish Protagonist",value:"130"},{label:"Office Romance",value:"491"},{label:"Models",value:"445"},{label:"Human Weapon",value:"350"},{label:"Fanaticism",value:"262"},{label:"Pilots",value:"528"},{label:"Lovers Reunited",value:"406"},{label:"Blind Protagonist",value:"91"},{label:"Rebellion",value:"573"},{label:"Programmer",value:"556"},{label:"Flashbacks",value:"281"},{label:"Forced into a Relationship",value:"284"},{label:"More Children More Blessings",value:"825"},{label:"Sibling's Care",value:"643"},{label:"Helpful Protagonist",value:"337"},{label:"Fat Protagonist",value:"269"},{label:"Awkward Protagonist",value:"67"},{label:"Spiritual Energy Revival",value:"828"},{label:"Distrustful Protagonist",value:"204"},{label:"Folklore",value:"283"},{label:"Engagement",value:"238"},{label:"Half-human Protagonist",value:"325"},{label:"Wishes",value:"753"},{label:"Tomboyish Female Lead",value:"712"},{label:"Shapeshifters",value:"631"},{label:"Love Triangles",value:"405"},{label:"Shounen-Ai Subplot",value:"639"},{label:"Shy Characters",value:"641"},{label:"Reborn as the Villain",value:"831"},{label:"Body Swap",value:"94"},{label:"Coming of Age",value:"147"},{label:"Online Romance",value:"495"},{label:"DnD",value:"794"},{label:"Kuudere",value:"382"},{label:"Monster Society",value:"450"},{label:"Adapted to Drama CD",value:"12"},{label:"Spirit Users",value:"670"},{label:"Trap",value:"722"},{label:"Orgy",value:"499"},{label:"Inferiority Complex",value:"363"},{label:"Unrequited Love",value:"738"},{label:"Genderless Protagonist",value:"302"},{label:"Elderly Protagonist",value:"231"},{label:"Tentacles",value:"700"},{label:"Clumsy Love Interests",value:"138"},{label:"Library",value:"391"},{label:"Parasites",value:"511"},{label:"Sentimental Protagonist",value:"621"},{label:"Mysterious Illness",value:"469"},{label:"Spies",value:"668"},{label:"Dead Protagonist",value:"182"},{label:"Former Hero",value:"288"},{label:"Cousins",value:"160"},{label:"Seduction",value:"614"},{label:"Interconnected Storylines",value:"367"},{label:"Jujutsu Kaisen",value:"776"},{label:"Curious Protagonist",value:"172"},{label:"Stockholm Syndrome",value:"673"},{label:"Genies",value:"305"},{label:"Time Paradox",value:"708"},{label:"Mind Break",value:"438"},{label:"Polite Protagonist",value:"535"},{label:"Bookworm",value:"99"},{label:"Transported Modern Structure",value:"720"},{label:"Bestiality",value:"82"},{label:"Childhood Promise",value:"129"},{label:"Parent Complex",value:"512"},{label:"Sibling Rivalry",value:"642"},{label:"BDSM",value:"77"},{label:"Eunuch",value:"242"},{label:"Introverted Protagonist",value:"369"},{label:"Affair",value:"23"},{label:"Autism",value:"63"},{label:"Matriarchy",value:"431"},{label:"Selfless Protagonist",value:"617"},{label:"Automatons",value:"64"},{label:"Business Wars",value:"806"},{label:"Quiet Characters",value:"565"},{label:"Depression",value:"194"},{label:"Siblings",value:"644"},{label:"Polyandry",value:"537"},{label:"Western Names",value:"788"},{label:"Terrorists",value:"702"},{label:"Ugly Protagonist",value:"728"},{label:"Rich to Poor",value:"589"},{label:"Reincarnated as an Object",value:"575"},{label:"Antique Shop",value:"44"},{label:"Amusement Park",value:"32"},{label:"Nurses",value:"489"},{label:"Friends Become Enemies",value:"290"},{label:"Sculptors",value:"604"},{label:"Forgetful Protagonist",value:"287"},{label:"Siheyuan",value:"820"},{label:"Invisibility",value:"371"},{label:"Schizophrenia",value:"602"},{label:"Voice Actors",value:"744"},{label:"Apartment Life",value:"45"},{label:"Terminal Illness",value:"701"},{label:"Adapted to Manhwa",value:"16"},{label:"Nightmares",value:"483"},{label:"Adapted to Movie",value:"17"},{label:"Priestesses",value:"552"},{label:"Co-Workers",value:"139"},{label:"Undead Protagonist",value:"810"},{label:"Disfigurement",value:"202"},{label:"Golems",value:"317"},{label:"Dystopia",value:"223"},{label:"Sharing A Body",value:"632"},{label:"Witcher",value:"819"},{label:"Based on a Visual Novel",value:"73"},{label:"Reporters",value:"581"},{label:"Onmyouji",value:"496"},{label:"Identity Crisis",value:"355"},{label:"Language Barrier",value:"384"},{label:"Part-Time Job",value:"514"},{label:"Clubs",value:"137"},{label:"Long-distance Relationship",value:"399"},{label:"Forced Living Arrangements",value:"285"},{label:"Paizuri",value:"509"},{label:"Cunnilingus",value:"170"},{label:"War Records",value:"747"},{label:"Rivalry",value:"591"},{label:"Loneliness",value:"396"},{label:"Pretend Lovers",value:"550"},{label:"Photography",value:"525"},{label:"Timid Protagonist",value:"711"},{label:"Youkai",value:"761"},{label:"Astrologers",value:"62"},{label:"Cosplay",value:"157"},{label:"Adapted from Manga",value:"8"},{label:"Confinement",value:"151"},{label:"Reversible Couple",value:"588"},{label:"Blind Dates",value:"90"},{label:"Eavesdropping",value:"798"},{label:"Neet",value:"479"},{label:"Star Wars",value:"817"},{label:"Stalkers",value:"672"},{label:"Outcasts",value:"503"},{label:"Secret Crush",value:"607"},{label:"Female to Male",value:"276"},{label:"Anti-Magic",value:"41"},{label:"Valkyries",value:"739"},{label:"Sex Friends",value:"626"},{label:"Non-linear Storytelling",value:"487"},{label:"Straight Uke",value:"677"},{label:"Galge",value:"295"},{label:"Mute Character",value:"467"},{label:"Jobless Class",value:"375"},{label:"Glasses-wearing Love Interests",value:"309"},{label:"Shikigami",value:"635"},{label:"Faith Dependent Deities",value:"808"},{label:"Delusions",value:"187"},{label:"Delinquents",value:"186"},{label:"Dancers",value:"177"},{label:"Award-winning Work",value:"66"},{label:"Conflicting Loyalties",value:"152"},{label:"Coma",value:"145"},{label:"Futanari",value:"293"},{label:"Divine Protection",value:"206"},{label:"Guardian Relationship",value:"321"},{label:"Grave Keepers",value:"319"},{label:"Mismatched Couple",value:"441"},{label:"Outdoor Intercourse",value:"504"},{label:"Incubus",value:"360"},{label:"Seven Virtues",value:"625"},{label:"Sign Language",value:"647"},{label:"Debts",value:"185"},{label:"Nudity",value:"488"},{label:"Roommates",value:"593"},{label:"Shota",value:"637"},{label:"Heterochromia",value:"340"},{label:"Indecisive Protagonist",value:"361"},{label:"Precognition",value:"548"},{label:"Frieren",value:"816"},{label:"Adapted to Visual Novel",value:"18"},{label:"Collection of Short Stories",value:"143"},{label:"Cryostasis",value:"168"},{label:"Bands",value:"68"},{label:"Netorase",value:"481"},{label:"Otome Game",value:"502"},{label:"Bisexual Protagonist",value:"86"},{label:"Homunculus",value:"345"},{label:"Voyeurism",value:"745"},{label:"Gladiators",value:"308"},{label:"Student Council",value:"684"},{label:"Samurai",value:"599"},{label:"Social Outcasts",value:"661"},{label:"Misandry",value:"440"},{label:"Fujoshi",value:"292"},{label:"Glasses-wearing Protagonist",value:"310"},{label:"Butlers",value:"110"},{label:"Adapted from Manhua",value:"9"},{label:"Sleeping",value:"657"},{label:"Overlord",value:"826"},{label:"Oneshot",value:"494"},{label:"Imaginary Friend",value:"356"},{label:"Jiangshi",value:"374"},{label:"Array",value:"822"},{label:"Based on a Song",value:"70"},{label:"Hong Kong",value:"821"},{label:"Waiters",value:"746"},{label:"JSDF",value:"376"},{label:"Short Story",value:"636"},{label:"Vocaloid",value:"743"},{label:"Living Abroad",value:"393"},{label:"Shield User",value:"634"},{label:"Editors",value:"229"},{label:"Reluctant Protagonist",value:"580"},{label:"Kimetsu no Yaiba",value:"805"},{label:"Toys",value:"714"},{label:"Classic",value:"133"},{label:"Breast Fetish",value:"102"},{label:"Exhibitionism",value:"249"},{label:"Pacifist Protagonist",value:"508"},{label:"Body-double",value:"96"},{label:"Reborn",value:"829"},{label:"Straight Seme",value:"676"},{label:"Phobias",value:"523"},{label:"Salaryman",value:"598"},{label:"Hikikomori",value:"344"},{label:"All-Girls School",value:"29"},{label:"Senpai-Kouhai Relationship",value:"619"}]},folders:{value:"",label:"Library Folders",options:[{label:"No Filter",value:""},{label:"Reading",value:"1"},{label:"Read Later",value:"2"},{label:"Completed",value:"3"},{label:"Trash",value:"5"}],type:u.FilterTypes.Picker},library_exclude:{value:"",label:"Library Exclude",options:[{label:"None",value:""},{label:"Exclude All",value:"history"},{label:"Exclude Trash",value:"trash"},{label:"Exclude Library & Trash",value:"in_library"}],type:u.FilterTypes.Picker}}}return o.prototype.popularNovels=function(a,u){return e(this,arguments,void 0,(function(e,a){var u,o,n,i,s,v,b,c,d,g,p,h,m,y=this,f=a.showLatestNovels,S=a.filters;return l(this,(function(l){switch(l.label){case 0:return u=this.site+this.sourceLang+"novel-list?",(o=new URLSearchParams).append("orderBy",S.orderBy.value),o.append("order",S.order.value),o.append("status",S.status.value),o.append("release_status",S.release_status.value),o.append("addition_age",S.addition_age.value),o.append("page",e.toString()),S.search.value&&o.append("text",S.search.value),(null===(g=S.genres.value)||void 0===g?void 0:g.include)&&S.genres.value.include.length>0&&(o.append("gi",S.genres.value.include.join(",")),o.append("gc",S.genre_operator.value)),(null===(p=S.genres.value)||void 0===p?void 0:p.exclude)&&S.genres.value.exclude.length>0&&o.append("ge",S.genres.value.exclude.join(",")),(null===(h=S.tags.value)||void 0===h?void 0:h.include)&&S.tags.value.include.length>0&&(o.append("ti",S.tags.value.include.join(",")),o.append("tc",S.tag_operator.value)),(null===(m=S.tags.value)||void 0===m?void 0:m.exclude)&&S.tags.value.exclude.length>0&&o.append("te",S.tags.value.exclude.join(",")),S.folders.value&&o.append("folders",S.folders.value),S.library_exclude.value&&o.append("le",S.library_exclude.value),S.min_chapters.value&&o.append("minc",S.min_chapters.value),S.min_rating.value&&o.append("minr",S.min_rating.value),S.min_review_count.value&&o.append("minrc",S.min_review_count.value),f?[4,(0,t.fetchApi)(this.site+"api/home/recent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e})})]:[3,3];case 1:case 5:return[4,l.sent().json()];case 2:return n=l.sent(),[2,n.data.map((function(e){return{name:e.serie.data.title||"",cover:e.serie.data.image,path:y.sourceLang+"serie-"+e.serie.raw_id+"/"+e.serie.slug||""}}))];case 3:return[4,(0,t.fetchApi)(this.site+"en/novel-finder").then((function(e){return e.text()}))];case 4:if(i=l.sent(),s=(0,r.load)(i),!(v=s("#__NEXT_DATA__").html()))throw new Error("Could not find __NEXT_DATA__ on novel finder page");return b=JSON.parse(v).buildId,u="".concat(this.site,"_next/data/").concat(b,"/en/novel-finder.json?").concat(o.toString()),[4,(0,t.fetchApi)(u)];case 6:return c=l.sent(),d=new Set,[2,c.pageProps.series.filter((function(e){return!d.has(e.id)&&(d.add(e.id),!0)})).map((function(e){return{name:e.data.title,cover:e.data.image,path:"".concat(y.sourceLang,"serie-").concat(e.id,"/").concat(e.slug)}}))]}}))}))},o.prototype.parseNovel=function(u){return e(this,void 0,void 0,(function(){var e,o,n,i,s,v,b,c,d,g,p,h,m,y,f,S,P,A,C,w,M,T,F,L,R,x,D,k;return l(this,(function(l){switch(l.label){case 0:return[4,(0,t.fetchApi)(this.site+u).then((function(e){return e.text()}))];case 1:if(e=l.sent(),console.log("Novel path:",u),o=(0,r.load)(e),n=o("#__NEXT_DATA__"),i=n.html(),s={path:u,name:"",cover:"",summary:""},i)try{if(v=JSON.parse(i),b=null===(F=null===(T=null===(M=null==v?void 0:v.props)||void 0===M?void 0:M.pageProps)||void 0===T?void 0:T.serie)||void 0===F?void 0:F.serie_data,console.log("Parsed novel JSON data:",b),b)switch(s.name=(null===(L=b.data)||void 0===L?void 0:L.title)||"",s.cover=(null===(R=b.data)||void 0===R?void 0:R.image)||"",s.summary=(null===(x=b.data)||void 0===x?void 0:x.description)||"",s.author=(null===(D=b.data)||void 0===D?void 0:D.author)||"",b.status){case 0:s.status="Ongoing";break;case 1:s.status="Completed";break;default:s.status="Unknown"}}catch(e){console.error("Failed to parse __NEXT_DATA__:",e)}if(s.name||(s.name=o("h1.text-uppercase").text()||o("h1.long-title").text()||o(".title-wrap h1").text().trim()),s.cover||(s.cover=o(".image-wrap img").attr("src")||o(".img-wrap > img").attr("src")),s.summary||(s.summary=o(".description").text().trim()||o(".desc-wrap .description").text().trim()||o(".lead").text().trim()),(c=o('td:contains("Genre")').next().find("a").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").trim()})).toArray()||o(".genre").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").trim()})).toArray()||o(".genres .genre").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").trim()})).toArray()).length>0&&(s.genres=c.map((function(e){return e.replace(/,$/,"").trim()})).filter((function(e){return e&&e.length>0})).join(", ")),d=o('td:contains("Tags")').next().find("a").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").replace(/,$/,"").trim()})).toArray()||o(".tag").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").replace(/,$/,"").trim()})).toArray()||o(".tags .tag").map((function(e,l){return o(l).text().replace(/<!--.*?-->/g,"").replace(/,$/,"").trim()})).toArray(),console.log("Found tags from HTML:",d),d.length>0&&(g=s.genres?s.genres.split(", "):[],console.log("Existing genres:",g),p=a(a([],g,!0),d,!0).filter((function(e){return e&&e.length>0})),h=p.filter((function(e,l){return p.indexOf(e)===l})),s.genres=h.join(", "),console.log("Combined genres:",s.genres)),s.author||(s.author=o('td:contains("Author")').next().text().replace(/[\t\n]/g,"").trim()||o('td:contains("Author") + td').text().replace(/[\t\n]/g,"").trim()),s.status||(s.status=o('td:contains("Status")').next().text().replace(/[\t\n]/g,"").trim()||o('td:contains("Status") + td').text().replace(/[\t\n]/g,"").trim()||(null===(k=o('.detail-line:contains("•")').text().match(/•\s*(\w+)/))||void 0===k?void 0:k[1])||""),console.log("Final novel data:",s),m=null,y=null,f=0,(S=u.match(/serie-(\d+)\/([^/]+)/))&&(m=parseInt(S[1]),y=S[2]),P=o('.detail-line:contains("Chapters")').text()||o('div:contains("Chapters")').text(),(A=P.match(/(\d+)\s+Chapters?/i))&&(f=parseInt(A[1])),C=[],!(m&&y&&f>0))return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.fetchAllChapters(m,f,y)];case 3:return C=l.sent(),[3,5];case 4:return w=l.sent(),console.error("Failed to fetch chapters via API:",w),C=[],[3,5];case 5:return[3,7];case 6:console.warn("Could not extract rawId, slug, or chapterCount from page",{rawId:m,slug:y,chapterCount:f}),l.label=7;case 7:return s.chapters=C,[2,s]}}))}))},o.prototype.parseChapter=function(a){return e(this,void 0,void 0,(function(){var e,u,r,o,n,i,s,v,b,c,d,g,p,h,m,y,f,S,P;return l(this,(function(l){switch(l.label){case 0:if(console.log("Chapter path:",a),e=null,u=null,(r=a.match(/serie-(\d+)\/[^/]+\/chapter-(\d+)/))&&(e=parseInt(r[1],10),u=parseInt(r[2],10),console.log("Extracted from URL - rawId:",e,"chapterNo:",u)),!e||!u)throw o="Missing required parameters for API call from URL '".concat(a,"' - rawId: ").concat(e,", chapterNo: ").concat(u,". Please check the URL format."),console.error(o),new Error(o);console.log("Making API call with parameters - rawId: ".concat(e,", chapterNo: ").concat(u)),l.label=1;case 1:return l.trys.push([1,4,,5]),[4,(0,t.fetchApi)("".concat(this.site,"api/reader/get"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({translate:"ai",language:"en",raw_id:e,chapter_no:u,retry:!1,force_retry:!1})})];case 2:if(!(n=l.sent()).ok)throw new Error("API request failed with status: ".concat(n.status," ").concat(n.statusText));return[4,n.json()];case 3:if(i=l.sent(),console.log("API response received:",i.success?"Success":"Failed"),console.log("API response structure:",{hasSuccess:"success"in i,hasData:"data"in i,hasDataData:i.data&&"data"in i.data,hasBody:(null===(h=i.data)||void 0===h?void 0:h.data)&&"body"in i.data.data}),i.success&&(null===(y=null===(m=i.data)||void 0===m?void 0:m.data)||void 0===y?void 0:y.body)&&Array.isArray(i.data.data.body)){for(console.log("Found chapter body in API response, length:",i.data.data.body.length),s="",v=0,b=i.data.data.body;v<b.length;v++)"string"==typeof(c=b[v])&&c.trim()&&(s+="<p>".concat(c.trim(),"</p>"));if(s){console.log("Successfully converted API body to HTML, initial length:",s.length);try{(d=null===(P=null===(S=null===(f=i.data)||void 0===f?void 0:f.data)||void 0===S?void 0:S.glossary_data)||void 0===P?void 0:P.terms)&&Array.isArray(d)?(g=d.map((function(e,l){var a=Array.isArray(e[0])?e[0]:[e[0]],t=e[1]||"";return{index:l,english:a[0]||"",chinese:t,symbol:"※".concat(l,"⛬")}})),s=this.replaceGlossarySymbols(s,g),console.log("Successfully replaced glossary symbols, final length:",s.length)):console.warn("No glossary data found in chapter response.")}catch(e){console.warn("Failed to apply glossary terms:",e instanceof Error?e.message:String(e))}return[2,s]}throw new Error("Chapter body array was empty or contained no valid text")}throw i.error?new Error("API returned error: ".concat(i.error)):new Error("API response did not contain valid chapter content in expected location (data.data.body)");case 4:throw p=l.sent(),console.error("Failed to fetch chapter via API:",p instanceof Error?p.message:String(p)),new Error("Failed to fetch chapter content: ".concat(p instanceof Error?p.message:String(p)));case 5:return[2]}}))}))},o.prototype.searchNovels=function(a,t){return e(this,void 0,void 0,(function(){var e;return l(this,(function(l){return(e=this.filters).search.value=a,[2,this.popularNovels(t,{showLatestNovels:!1,filters:e})]}))}))},o.prototype.fetchAllChapters=function(a,u,r){return e(this,void 0,void 0,(function(){var e,o,n,i,s,v,b,c=this;return l(this,(function(l){switch(l.label){case 0:e=[],o=250,n=1,l.label=1;case 1:if(!(n<=u))return[3,7];i=Math.min(n+o-1,u),l.label=2;case 2:return l.trys.push([2,5,,6]),[4,(0,t.fetchApi)("".concat(this.site,"api/chapters/").concat(a,"?start=").concat(n,"&end=").concat(i))];case 3:return[4,l.sent().json()];case 4:return(s=l.sent()).chapters&&Array.isArray(s.chapters)&&(v=s.chapters.map((function(e){var l;return{name:e.title,path:"".concat(c.sourceLang,"serie-").concat(a,"/").concat(r,"/chapter-").concat(e.order),releaseTime:null===(l=e.updated_at)||void 0===l?void 0:l.substring(0,10),chapterNumber:e.order}})),e.push.apply(e,v)),!s.chapters||s.chapters.length<o?[3,7]:[3,6];case 5:return b=l.sent(),console.error("Failed to fetch chapters ".concat(n,"-").concat(i,":"),b),[3,6];case 6:return n+=o,[3,1];case 7:return[2,e.sort((function(e,l){return(e.chapterNumber||0)-(l.chapterNumber||0)}))]}}))}))},o.prototype.replaceGlossarySymbols=function(e,l){var a=e,t=0;console.log("Replacing glossary symbols in content with ".concat(l.length," terms"));for(var u=0,r=l;u<r.length;u++){var o=r[u];if(o.english&&o.symbol){var n=new RegExp(o.symbol.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i=a.match(n);a=a.replace(n,o.english),i&&i.length>0&&(t+=i.length,console.log("Replaced ".concat(i.length," occurrences of ").concat(o.symbol,' with "').concat(o.english,'"')))}}return console.log("Total glossary replacements made: ".concat(t)),a},o}();exports.default=new o;