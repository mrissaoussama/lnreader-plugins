var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,l){function o(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},t=this&&this.__generator||function(e,t){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("cheerio"),n=require("@libs/fetch"),a=require("@libs/filterInputs"),l=function(){function l(){this.id="novelupdates",this.name="Novel Updates",this.version="0.9.2",this.icon="src/en/novelupdates/icon.png",this.customCSS="src/en/novelupdates/customCSS.css",this.site="https://www.novelupdates.com/",this.filters={sort:{label:"Sort Results By",value:"popmonth",options:[{label:"Popular (Month)",value:"popmonth"},{label:"Popular (All)",value:"popular"},{label:"Latest Added",value:"latest"},{label:"Last Updated",value:"sdate"},{label:"Rating",value:"srate"},{label:"Rank",value:"srank"},{label:"Reviews",value:"sreview"},{label:"Chapters",value:"srel"},{label:"Title",value:"abc"},{label:"Readers",value:"sread"},{label:"Frequency",value:"sfrel"}],type:a.FilterTypes.Picker},order:{label:"Order (Not for Popular)",value:"desc",options:[{label:"Descending",value:"desc"},{label:"Ascending",value:"asc"}],type:a.FilterTypes.Picker},storyStatus:{label:"Story Status (Translation)",value:"",options:[{label:"All",value:""},{label:"Completed",value:"2"},{label:"Ongoing",value:"3"},{label:"Hiatus",value:"4"}],type:a.FilterTypes.Picker},genre_operator:{label:"Genre (And/Or) (Not for Popular)",value:"and",options:[{label:"And",value:"and"},{label:"Or",value:"or"}],type:a.FilterTypes.Picker},genres:{label:"Genres",type:a.FilterTypes.ExcludableCheckboxGroup,value:{include:[],exclude:[]},options:[{label:"Action",value:"8"},{label:"Adult",value:"280"},{label:"Adventure",value:"13"},{label:"Comedy",value:"17"},{label:"Drama",value:"9"},{label:"Ecchi",value:"292"},{label:"Fantasy",value:"5"},{label:"Gender Bender",value:"168"},{label:"Harem",value:"3"},{label:"Historical",value:"330"},{label:"Horror",value:"343"},{label:"Josei",value:"324"},{label:"Martial Arts",value:"14"},{label:"Mature",value:"4"},{label:"Mecha",value:"10"},{label:"Mystery",value:"245"},{label:"Psychoical",value:"486"},{label:"Romance",value:"15"},{label:"School Life",value:"6"},{label:"Sci-fi",value:"11"},{label:"Seinen",value:"18"},{label:"Shoujo",value:"157"},{label:"Shoujo Ai",value:"851"},{label:"Shounen",value:"12"},{label:"Shounen Ai",value:"1692"},{label:"Slice of Life",value:"7"},{label:"Smut",value:"281"},{label:"Sports",value:"1357"},{label:"Supernatural",value:"16"},{label:"Tragedy",value:"132"},{label:"Wuxia",value:"479"},{label:"Xianxia",value:"480"},{label:"Xuanhuan",value:"3954"},{label:"Yaoi",value:"560"},{label:"Yuri",value:"922"}]},language:{label:"Language",value:[],options:[{label:"Chinese",value:"495"},{label:"Filipino",value:"9181"},{label:"Indonesian",value:"9179"},{label:"Japanese",value:"496"},{label:"Khmer",value:"18657"},{label:"Korean",value:"497"},{label:"Malaysian",value:"9183"},{label:"Thai",value:"9954"},{label:"Vietnamese",value:"9177"}],type:a.FilterTypes.CheckboxGroup},novelType:{label:"Novel Type (Not for Popular)",value:[],options:[{label:"Light Novel",value:"2443"},{label:"Published Novel",value:"26874"},{label:"Web Novel",value:"2444"}],type:a.FilterTypes.CheckboxGroup},reading_list_operator:{label:"Reading List (Include/Exclude) (Not for Popular)",value:"include",options:[{label:"Include",value:"include"},{label:"Exclude",value:"exclude"}],type:a.FilterTypes.Picker},reading_lists:{label:"Reading Lists (Not for Popular)",value:[],options:[{label:"All Reading Lists",value:"-1"}],type:a.FilterTypes.CheckboxGroup}}}return l.prototype.parseNovels=function(e){var t=this,r=[];return e("div.search_main_box_nu").each((function(n,a){var l=e(a).find(".search_title > a").attr("href");l&&r.push({name:e(a).find(".search_title > a").text(),cover:e(a).find("img").attr("src"),path:l.replace(t.site,"")})})),r},l.prototype.popularNovels=function(a,l){return e(this,arguments,void 0,(function(e,a){var l,o,i,s,c,u,p,h,d,v,f,m=a.showLatestNovels,b=a.filters;return t(this,(function(t){switch(t.label){case 0:return l=this.site,m?l+="series-finder/?sf=1&sort=sdate&order=desc":"popmonth"===(null==b?void 0:b.sort.value)||"popular"===(null==b?void 0:b.sort.value)?l+="series-ranking/?rank="+b.sort.value:"latest"===(null==b?void 0:b.sort.value)?(l+="latest-series/?st=1",(null===(s=null==b?void 0:b.genres.value.include)||void 0===s?void 0:s.length)&&(l+="&gi="+b.genres.value.include.join(",")),(null===(c=null==b?void 0:b.genres.value.exclude)||void 0===c?void 0:c.length)&&(l+="&ge="+b.genres.value.exclude.join(",")),((null===(u=null==b?void 0:b.genres.value.include)||void 0===u?void 0:u.length)||(null===(p=null==b?void 0:b.genres.value.exclude)||void 0===p?void 0:p.length))&&(l+="&mgi="+b.genre_operator.value),(null==b?void 0:b.language.value.length)&&(l+="&org="+b.language.value.join(",")),l+="&pg="+e):(l+="series-finder/?sf=1",((null===(h=null==b?void 0:b.genres.value.include)||void 0===h?void 0:h.length)||(null===(d=null==b?void 0:b.genres.value.exclude)||void 0===d?void 0:d.length))&&(l+="&mgi="+b.genre_operator.value),(null==b?void 0:b.novelType.value.length)&&(l+="&nt="+b.novelType.value.join(",")),(null==b?void 0:b.reading_lists.value.length)&&(l+="&hd="+(null==b?void 0:b.reading_lists.value.join(",")),l+="&mRLi="+(null==b?void 0:b.reading_list_operator.value)),l+="&sort="+(null==b?void 0:b.sort.value),l+="&order="+(null==b?void 0:b.order.value),(null==b?void 0:b.language.value.length)&&(l+="&org="+b.language.value.join(",")),(null===(v=null==b?void 0:b.genres.value.include)||void 0===v?void 0:v.length)&&(l+="&gi="+b.genres.value.include.join(",")),(null===(f=null==b?void 0:b.genres.value.exclude)||void 0===f?void 0:f.length)&&(l+="&ge="+b.genres.value.exclude.join(",")),(null==b?void 0:b.storyStatus.value)&&(l+="&ss="+b.storyStatus.value),l+="&pg="+e),[4,(0,n.fetchApi)(l)];case 1:return[4,t.sent().text()];case 2:return o=t.sent(),i=(0,r.load)(o),[2,this.parseNovels(i)]}}))}))},l.prototype.parseNovel=function(a){return e(this,void 0,void 0,(function(){var e,l,o,i,s,c,u,p,h,d,v,f,m,b,g,y,x=this;return t(this,(function(t){switch(t.label){case 0:return e=this.site+a,[4,(0,n.fetchApi)(e)];case 1:return[4,t.sent().text()];case 2:return l=t.sent(),o=(0,r.load)(l),console.log(l),console.log(o(".seriestitlenu")),i={path:a,name:o(".seriestitlenu").text()||"Untitled",cover:o(".wpb_wrapper img").attr("src"),chapters:[]},console.log(),(s=o("#editassociated")).length&&(c=s.html())&&(u=c.split(/<br\s*\/?>/i).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))).length>0&&(i.altNames=u),i.author=o("#authtag").map((function(e,t){return o(t).text().trim()})).toArray().join(", "),i.genres=o("#seriesgenre").children("a").map((function(e,t){return o(t).text()})).toArray().join(","),i.status=o("#editstatus").text().includes("Ongoing")?"Ongoing":"Completed",p=o("#showtype").text().trim(),h=o("#editdescription").text().trim(),i.summary=h+"\n\nType: ".concat(p),(d=null===(y=o(".seriesother .uvotes").text().match(/(\d+\.\d+) \/ \d+\.\d+/))||void 0===y?void 0:y[1])&&(i.rating=parseFloat(d)),v=o("input#mypostid").attr("value"),(f=new FormData).append("action","nd_getchapters"),f.append("mygrr","0"),f.append("mypostid",v),[4,(0,n.fetchApi)("".concat(this.site,"wp-admin/admin-ajax.php"),{method:"POST",body:f}).then((function(e){return e.text()}))];case 3:return m=t.sent(),b=(0,r.load)(m),g=[],b("li.sp_li_chp").each((function(e,t){var r=b(t).text().replace("v","volume ").replace("c"," chapter ").replace("part","part ").replace("ss","SS").replace(/\b\w/g,(function(e){return e.toUpperCase()})).trim(),n="https:"+b(t).find("a").first().next().attr("href");n&&g.push({name:r,path:n.replace(x.site,"")})})),i.chapters=g.reverse(),[2,i]}}))}))},l.prototype.getLocation=function(e){var t=e.match(/^(https?:)\/\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&"".concat(t[1],"//").concat(t[3])},l.prototype.getChapterBody=function(a,l,o){return e(this,void 0,void 0,(function(){var e,i,s,c,u,p,h,d,v,f,m,b,g,y,x,w,_,C,k,A,j,S,T,E,N,L,z,P,F,O,M;return t(this,(function(t){switch(t.label){case 0:switch(e="",i="",s="",c=["app","blogspot","casper","wordpress","www"],u=l.find((function(e){return!c.includes(e)})),u){case"anotivereads":return[3,1];case"arcanetranslations":return[3,2];case"asuratls":return[3,3];case"daoist":return[3,4];case"darkstartranslations":return[3,5];case"fictionread":return[3,6];case"genesistudio":return[3,7];case"helscans":return[3,12];case"hiraethtranslation":return[3,13];case"hostednovel":return[3,14];case"infinitenoveltranslations":return[3,15];case"inoveltranslation":return[3,19];case"isotls":return[3,20];case"ko-fi":return[3,21];case"mirilu":return[3,22];case"novelplex":return[3,23];case"novelworldtranslations":return[3,24];case"raeitranslations":return[3,25];case"rainofsnow":return[3,27];case"readingpia":return[3,28];case"redoxtranslation":return[3,29];case"sacredtexttranslations":return[3,31];case"scribblehub":return[3,32];case"skydemonorder":return[3,33];case"stabbingwithasyringe":return[3,34];case"tinytranslation":return[3,38];case"tumblr":return[3,39];case"vampiramtl":return[3,40];case"wattpad":return[3,44];case"webnovel":return[3,45];case"wetriedtls":return[3,46];case"wuxiaworld":return[3,47];case"yoru":return[3,48];case"zetrotranslation":return[3,51]}return[3,52];case 1:return e=a("#comic-nav-name").first().text(),i=a("#spliced-comic").html(),[3,52];case 2:return[".bottomnav"].forEach((function(e){return a(e).remove()})),e=a(".epwrapper .cat-series").first().text(),a(".entry-content div, .entry-content span").each((function(e,t){var r=a(t),n=r.attr("style");n&&(/border:.*#00219b/.test(n)?r.removeAttr("style").addClass("arcane_box_blue"):/border:.*white/.test(n)?r.removeAttr("style").addClass("arcane_box_white"):n.includes("text-transform: uppercase")&&/text-shadow:.*blue/.test(n)?r.removeAttr("style").addClass("arcane_title_blue"):/text-shadow:.*blue/.test(n)?r.removeAttr("style").addClass("arcane_text_blue"):/text-shadow:.*lightyellow/.test(n)?r.removeAttr("style").addClass("arcane_text_lightyellow"):/color:.*#ff00ff/.test(n)&&r.removeAttr("style").addClass("arcane_text_pink"))})),i=a(".entry-content").html(),[3,52];case 3:return O=a(".post-body div b").first(),e=O.text(),O.remove(),i=a(".post-body").html(),[3,52];case 4:return e=a(".chapter__title").first().text(),i=a(".chapter__content").html(),[3,52];case 5:return e=a("ol.breadcrumb li").last().text().trim(),i=a(".text-left").html(),(p=(0,r.load)(i))("br").each((function(e,t){p(t).after("<br>")})),i=p.html(),[3,52];case 6:return[".content > style",".highlight-ad-container",".meaning",".word"].forEach((function(e){return a(e).remove()})),e=a(".title-image span").first().text(),a(".content").children().each((function(e,t){var r;if(null===(r=a(t).attr("id"))||void 0===r?void 0:r.includes("Chaptertitle-info"))return a(t).remove(),!1})),i=a(".content").html(),[3,52];case 7:P="".concat(o,"/__data.json?x-sveltekit-invalidated=001"),t.label=8;case 8:return t.trys.push([8,10,,11]),[4,(0,n.fetchApi)(P).then((function(e){return e.json()}))];case 9:for(b in F=t.sent(),h=F.nodes,d=h.filter((function(e){return"data"===e.type})).map((function(e){return e.data}))[0],v="content",f="notes",m="footnotes",d)if((g=d[b])&&"object"==typeof g&&v in g&&f in g&&m in g){y=d[g[v]],x=d[g[f]],w=d[g[m]],s=y+(x?"<h2>Notes</h2><br>".concat(x):"")+(null!=w?w:"");break}return[3,11];case 10:throw _=t.sent(),new Error("Failed to fetch chapter data: ".concat(_));case 11:return[3,52];case 12:return e=a(".entry-title-main").first().text(),C="Chapter "+e.split("Chapter")[1].trim(),a("#readerarea.rdminimal").children().each((function(t,r){var n=a(r).text();if(n.includes(C))return e=n,a(r).remove(),!1})),i=a("#readerarea.rdminimal").html(),[3,52];case 13:return e=a("li.active").first().text(),i=a(".text-left").html(),[3,52];case 14:return e=a("#chapter-title").first().text(),i=a("#chapter-content").html(),[3,52];case 15:return(P=a("article > p > a").first().attr("href"))?[4,(0,n.fetchApi)(P)]:[3,18];case 16:return[4,t.sent().text()];case 17:E=t.sent(),a=(0,r.load)(E),t.label=18;case 18:return i=a(".hentry").html(),e=a(".page-entry-title").text(),[3,52];case 19:return["header","section"].forEach((function(e){return a(e).remove()})),s=a(".styles_content__JHK8G").html(),[3,52];case 20:return["footer","header","nav",".ezoic-ad",".ezoic-adpicker-ad",".ezoic-videopicker-video"].forEach((function(e){return a(e).remove()})),e=a("head title").first().text(),i=a("main article").html(),[3,52];case 21:return(k=null===(M=a('script:contains("shadowDom.innerHTML")').html())||void 0===M?void 0:M.match(/shadowDom\.innerHTML \+= '(<div.*?)';/))&&k[1]&&(s=k[1]),[3,52];case 22:return["#jp-post-flair"].forEach((function(e){return a(e).remove()})),O=a(".entry-content p strong").first(),e=O.text(),O.remove(),i=a(".entry-content").html(),[3,52];case 23:return[".passingthrough_adreminder"].forEach((function(e){return a(e).remove()})),e=a(".halChap--jud").first().text(),i=a(".halChap--kontenInner ").html(),[3,52];case 24:return[".separator img"].forEach((function(e){return a(e).remove()})),a(".entry-content a").filter((function(e,t){var r;return(null===(r=a(t).attr("href"))||void 0===r?void 0:r.includes("https://novelworldtranslations.blogspot.com"))||!1})).each((function(e,t){a(t).parent().remove()})),e=a(".entry-title").first().text(),i=a(".entry-content").html().replace(/&nbsp;/g,"").replace(/\n/g,"<br>"),(A=(0,r.load)(i))("span, p, div").each((function(e,t){""===A(t).text().trim()&&A(t).remove()})),i=A.html(),[3,52];case 25:return j=o.split("/"),P="".concat(j[0],"//api.").concat(j[2],"/api/chapters/single?id=").concat(j[3],"&num=").concat(j[4]),[4,(0,n.fetchApi)(P).then((function(e){return e.json()}))];case 26:return F=t.sent(),O="Chapter ".concat(F.currentChapter.chapTag),e=F.currentChapter.chapTitle?"".concat(O," - ").concat(F.currentChapter.chapTitle):O,i=(i=[F.novelHead,"<br><hr><br>",F.currentChapter.body,"<br><hr><br>Translator's Note:<br>",F.currentChapter.note].join("")).replace(/\n/g,"<br>"),[3,52];case 27:return S=a(".bb-item").filter((function(){return"block"===a(this).css("display")})),T=(0,r.load)(S.html()),[".responsivevoice-button",".zoomdesc-cont p img",".zoomdesc-cont p noscript"].forEach((function(e){return T(e).remove()})),i=T(".zoomdesc-cont").html(),(O=T(".scroller h2").first()).length&&(e=O.text(),O.remove(),i=T(".zoomdesc-cont").html()),[3,52];case 28:return[".ezoic-ad",".ezoic-adpicker-ad",".ez-video-wrap"].forEach((function(e){return a(e).remove()})),s=a(".chapter-body").html(),[3,52];case 29:return z=o.split("/").pop(),e="Chapter ".concat(z),P="".concat(o.split("chapter")[0],"txt/").concat(z,".txt"),[4,(0,n.fetchApi)(P).then((function(e){return e.text()})).then((function(e){return e.split("\n").map((function(e){return e.includes("{break}")?"<br> <p>****</p>":e=(e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")).replace(/\+\+(.*?)\+\+/g,"<em>$1</em>")})).join("<br>")}))];case 30:return i=t.sent(),[3,52];case 31:return[".entry-content blockquote",".entry-content div",".reaction-buttons"].forEach((function(e){return a(e).remove()})),e=a(".entry-title").first().text(),i=a(".entry-content").html(),[3,52];case 32:return[".wi_authornotes"].forEach((function(e){return a(e).remove()})),e=a(".chapter-title").first().text(),i=a(".chp_raw").html(),[3,52];case 33:if(a("main").text().toLowerCase().includes("age verification required"))throw new Error("Age verification required, please open in webview.");return e="".concat(a("header .font-medium.text-sm").first().text().trim()),i=a("#chapter-body").html(),[3,52];case 34:return(P=a(".entry-content a").attr("href"))?[4,(0,n.fetchApi)(P)]:[3,37];case 35:return[4,t.sent().text()];case 36:E=t.sent(),a=(0,r.load)(E),t.label=37;case 37:return[".has-inline-color",".wp-block-buttons",".wpcnt","#jp-post-flair"].forEach((function(e){return a(e).remove()})),i=a(".entry-content").html(),(O=a(".entry-content h3").first()).length&&(e=O.text(),O.remove(),i=a(".entry-content").html()),[3,52];case 38:return[".content noscript",".google_translate_element",".navigate",".post-views","br"].forEach((function(e){return a(e).remove()})),e=a(".title-content").first().text(),a(".title-content").first().remove(),i=a(".content").html(),[3,52];case 39:return s=a(".post").html(),[3,52];case 40:return(P=a(".entry-content a").attr("href"))?[4,(0,n.fetchApi)(o+P)]:[3,43];case 41:return[4,t.sent().text()];case 42:E=t.sent(),a=(0,r.load)(E),t.label=43;case 43:return e=a(".entry-title").first().text(),i=a(".entry-content").html(),[3,52];case 44:return e=a(".h2").first().text(),i=a(".part-content pre").html(),[3,52];case 45:return e=a(".cha-tit .pr .dib").first().text(),(i=a(".cha-words").html())||(i=a("._content").html()),[3,52];case 46:return(N=a('script:contains("p dir=")').html()||a('script:contains("u003c")').html())&&(L=N.slice(N.indexOf(".push(")+6,N.lastIndexOf(")")),s=JSON.parse(L)[1]),[3,52];case 47:return[".MuiLink-root"].forEach((function(e){return a(e).remove()})),e=a("h4 span").first().text(),i=a(".chapter-content").html(),[3,52];case 48:return z=o.split("/").pop(),P="https://pxp-main-531j.onrender.com/api/v1/book_chapters/".concat(z,"/content"),[4,(0,n.fetchApi)(P).then((function(e){return e.json()}))];case 49:return F=t.sent(),[4,(0,n.fetchApi)(F).then((function(e){return e.text()}))];case 50:return s=t.sent(),[3,52];case 51:return i=a(".text-left").html(),(O=a(".text-left h2").first()).length?(e=O.text(),O.remove(),i=a(".text-left").html()):i&&(e=a(".active").first().text()),[3,52];case 52:return s||(s=e?"<h2>".concat(e,"</h2><hr><br>").concat(i):i),[2,s]}}))}))},l.prototype.parseChapter=function(a){return e(this,void 0,void 0,(function(){var e,l,o,i,s,c,u,p,h,d,v,f,m,b,g,y;return t(this,(function(t){switch(t.label){case 0:return[4,(0,n.fetchApi)(this.site+a)];case 1:return[4,(l=t.sent()).text()];case 2:if(o=t.sent(),i=l.url,s=i.toLowerCase().split("/")[2].split("."),c=(0,r.load)(o),u=["bot verification","just a moment...","redirecting...","un instant...","you are being redirected..."],p=c("title").text().trim().toLowerCase(),u.includes(p))throw new Error("Captcha detected, please open in webview.");if(!l.ok)throw new Error("Failed to fetch ".concat(l.url,": ").concat(l.status," ").concat(l.statusText));return h=["blogspot","blogger"].some((function(e){return[c('meta[name="google-adsense-platform-domain"]').attr("content"),c('meta[name="generator"]').attr("content")].some((function(t){return null==t?void 0:t.toLowerCase().includes(e)}))})),d=["wordpress","site kit by google"].some((function(e){return[c("#dcl_comments-js-extra").html(),c('meta[name="generator"]').attr("content"),c(".powered-by").text(),c("footer").text()].some((function(t){return null==t?void 0:t.toLowerCase().includes(e)}))})),v=["etherreads","greenztl2","soafp"],!d&&s.some((function(e){return v.includes(e)}))&&(d=!0),f=["anotivereads","arcanetranslations","asuratls","darkstartranslations","fictionread","helscans","infinitenoveltranslations","mirilu","novelworldtranslations","sacredtexttranslations","stabbingwithasyringe","tinytranslation","vampiramtl","zetrotranslation"],s.some((function(e){return f.includes(e)}))&&(d=!1,h=!1),d||h?[3,4]:[4,this.getChapterBody(c,s,i)];case 3:return e=t.sent(),[3,5];case 4:(h?[".button-container",".ChapterNav",".ch-bottom",".separator"]:[".ad",".author-avatar",".chapter-warning",".entry-meta",".ezoic-ad",".mb-center",".modern-footnotes-footnote__note",".patreon-widget",".post-cats",".pre-bar",".sharedaddy",".sidebar",".swg-button-v2-light",".wp-block-buttons",".wp-dark-mode-switcher",".wp-next-post-navi","#hpk","#jp-post-flair","#textbox"]).forEach((function(e){return c(e).remove()})),m=(h?[".entry-title",".post-title","head title"]:[".entry-title",".chapter__title",".title-content",".wp-block-post-title",".title_story","#chapter-heading","head title","h1:first-of-type","h2:first-of-type",".active"]).map((function(e){return c(e).first().text()})).find((function(e){return e})),(b=c(".cat-series").first().text()||c("h1.leading-none ~ span").first().text())&&(m=b),g=(h?[".content-post",".entry-content",".post-body"]:[".chapter__content",".entry-content",".text_story",".post-content",".contenta",".single_post",".main-content",".reader-content","#content","#the-content","article.post"]).map((function(e){return c(e).html()})).find((function(e){return e})),e=m?"<h2>".concat(m,"</h2><hr><br>").concat(g):g,t.label=5;case 5:return e||(["nav","header","footer",".hidden"].forEach((function(e){return c(e).remove()})),e=c("body").html()),e=e.replace(/href="\//g,'href="'.concat(this.getLocation(l.url),"/")),(y=(0,r.load)(e))("noscript").remove(),y("img").each((function(e,t){var r=y(t);r.attr("data-lazy-src")&&r.attr("src",r.attr("data-lazy-src")),r.attr("data-lazy-srcset")&&r.attr("srcset",r.attr("data-lazy-srcset")),r.hasClass("lazyloaded")&&r.removeClass("lazyloaded")})),[2,y.html()]}}))}))},l.prototype.searchNovels=function(a,l){return e(this,void 0,void 0,(function(){var e,o,i,s,c;return t(this,(function(t){switch(t.label){case 0:return e=a.split("*"),o=e.reduce((function(e,t){return e.length>t.length?e:t}),""),a=o.replace(/[‘’]/g,"'").replace(/\s+/g,"+"),i="".concat(this.site,"series-finder/?sf=1&sh=").concat(a,"&sort=srank&order=asc&pg=").concat(l),[4,(0,n.fetchApi)(i)];case 1:return[4,t.sent().text()];case 2:return s=t.sent(),c=(0,r.load)(s),[2,this.parseNovels(c)]}}))}))},l}();exports.default=new l;